<h1>Welcome, {{ user.email }}</h1>

{% if user.is_restricted %}
    <p>You are logged in as a restricted user.</p>
{% else %}
    <p>You are logged in as a non-restricted user.</p>

    <div class="form-container">
        <h2>Register New Restricted User</h2>
        <form action="{{ url_for('users_template_post') }}" method="post">
            <div>
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required>
            </div>
            <div>
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
            </div>
            <div>
                <label for="password">Password:</label>
                <input type="password" id="password" name="password" required>
            </div>
            <div>
                <label>
                    <input type="checkbox" name="create_event" value="true"> Create Event
                </label>
            </div>
            <div>
                <label>
                    <input type="checkbox" name="create_form" value="true"> Create Form
                </label>
            </div>
            <div>
                <button type="submit" class="button">Register New User</button>
            </div>
        </form>
    </div>
{% endif %}

{% if create_event %}
    <a href="{{ url_for('create_event') }}" class="button">Create New Event</a>
{% endif %}

<h2>Your Events</h2>
{% if events %}
    <table>
        <tr>
            <th>Event Name</th>
            <th>Venue</th>
            <th>Date</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
        {% for event in events %}
        <tr>
            <td>{{ event.event_name }}</td>
            <td>{{ event.venue_address }}</td>
            <td>{{ event.event_date }}</td>
            <td>{{ event.status }}</td>
            <td>
                {% if create_form %}
                    <a href="{{ url_for('create_form', event_id=event.id) }}" class="button">Create Form</a>
                {% endif %}
                {% if view_registration %}
                    <a href="{{ url_for('view_registrations', event_id=event.id) }}" class="button">View Registrations</a>
                {% endif %}
                <a href="{{ url_for('edit_event') }}?id={{ event.id }}" class="button">Edit</a>
                <form action="{{ url_for('delete_event') }}" method="post" style="display: inline;">
                    <input type="hidden" name="event_id" value="{{ event.id }}">
                    <button type="submit" class="button" style="background-color: #f44336;">Delete</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>
{% else %}
    <p>You haven't created any events yet.</p>
{% endif %}

<br>
<a href="{{ url_for('logout') }}" class="button" style="background-color: #f44336;">Logout</a>